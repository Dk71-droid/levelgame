<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz Master</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="particles"></div>
  <div id="toastContainer"></div>

  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="logo">
        <i class="fas fa-graduation-cap"></i>
        <span>Quiz Master</span>
      </div>
      <div class="user-info">
        <div class="score-display">
          <i class="fas fa-star"></i>
          <span id="totalScore">0</span>
        </div>
        <div class="progress-ring">
          <svg class="progress-svg" width="50" height="50">
            <circle cx="25" cy="25" r="20" fill="none" stroke="#e8ecef" stroke-width="5"/>
            <circle id="progress-circle" cx="25" cy="25" r="20" fill="none" stroke-width="5"/>
          </svg>
          <span class="progress-text" id="progressText">0%</span>
        </div>
        <div class="settings-icon" onclick="showSettings()">
          <i class="fas fa-cog"></i>
        </div>
        <button class="btn-primary" onclick="showAdminPanel()">Admin Panel</button>
      </div>
    </div>
  </header>

  <!-- Welcome Section -->
  <section id="welcomeSection">
    <div class="welcome-card">
      <h1>Selamat Datang di Quiz Master!</h1>
      <p>Tantang pengetahuan Anda dengan berbagai level kuis yang menarik.</p>
      <div class="stats-grid">
        <div class="stat-item">
          <i class="fas fa-star"></i>
          <span>Skor Total: </span>
          <span id="totalScoreStat">0</span>
        </div>
        <div class="stat-item">
          <i class="fas fa-trophy"></i>
          <span>Level Selesai: </span>
          <span id="completedLevels">0</span>
        </div>
        <div class="stat-item">
          <i class="fas fa-fire"></i>
          <span>Streak: </span>
          <span id="streak">0</span>
        </div>
        <div class="stat-item">
          <i class="fas fa-clock"></i>
          <span>Total Waktu: </span>
          <span id="totalTime">0m</span>
        </div>
      </div>
      <div class="welcome-actions">
        <button class="btn-primary" onclick="showLevelSelect()">Mulai Kuis</button>
        <button class="btn-secondary" onclick="showAddLevel()">Buat Level</button>
      </div>
    </div>
  </section>

  <!-- Level Selection Section -->
  <section id="levelSection" class="level-section hidden">
    <div class="container">
      <div class="section-header">
        <h2>Pilih Level</h2>
        <div class="header-actions">
          <button class="btn-primary" onclick="showAddQuestion()">Tambah Soal</button>
          <button class="btn-secondary" onclick="showAddLevel()">Tambah Level</button>
        </div>
      </div>
      <div id="levelGrid" class="level-grid"></div>
    </div>
  </section>

  <!-- Add Question Section -->
  <section id="addQuestionSection" class="add-question-section hidden">
    <div class="form-card">
      <div class="form-header">
        <h2>Tambah Soal</h2>
        <button class="btn-close" onclick="showLevelSelect()">×</button>
      </div>
      <form id="addQuestionForm">
        <div class="form-group">
          <label for="levelSelect">Pilih Level:</label>
          <select id="levelSelect" required>
            <option value="">Pilih Level</option>
          </select>
        </div>
        <div class="form-group">
          <label for="questionText">Pertanyaan:</label>
          <textarea id="questionText" rows="4" required></textarea>
        </div>
        <div class="form-group">
          <label>Pilihan Jawaban:</label>
          <div class="option-group">
            <input type="text" id="option1" placeholder="Pilihan A" required>
            <label><input type="radio" name="correctAnswer" value="0" required> Benar</label>
          </div>
          <div class="option-group">
            <input type="text" id="option2" placeholder="Pilihan B" required>
            <label><input type="radio" name="correctAnswer" value="1"> Benar</label>
          </div>
          <div class="option-group">
            <input type="text" id="option3" placeholder="Pilihan C" required>
            <label><input type="radio" name="correctAnswer" value="2"> Benar</label>
          </div>
          <div class="option-group">
            <input type="text" id="option4" placeholder="Pilihan D" required>
            <label><input type="radio" name="correctAnswer" value="3"> Benar</label>
          </div>
        </div>
        <div class="form-group">
          <label for="difficulty">Tingkat Kesulitan:</label>
          <select id="difficulty" required>
            <option value="easy">Mudah</option>
            <option value="medium">Sedang</option>
            <option value="hard">Sulit</option>
          </select>
        </div>
        <div class="form-actions">
          <button type="button" class="btn-secondary" onclick="showLevelSelect()">Batal</button>
          <button type="submit" class="btn-primary">Tambah Soal</button>
        </div>
      </form>
    </div>
  </section>

  <!-- Add Level Section -->
  <section id="addLevelSection" class="add-level-section hidden">
    <div class="form-card">
      <div class="form-header">
        <h2>Buat Level Baru</h2>
        <button class="btn-close" onclick="showLevelSelect()">×</button>
      </div>
      <form id="addLevelForm">
        <div class="form-group">
          <label for="levelName">Nama Level:</label>
          <input type="text" id="levelName" required>
        </div>
        <div class="form-group">
          <label for="levelDescription">Deskripsi:</label>
          <textarea id="levelDescription" rows="4"></textarea>
        </div>
        <div class="form-actions">
          <button type="button" class="btn-secondary" onclick="showLevelSelect()">Batal</button>
          <button type="submit" class="btn-primary">Buat Level</button>
        </div>
      </form>
    </div>
  </section>

  <!-- Admin Panel Section -->
  <section id="adminSection" class="add-level-section hidden">
    <div class="form-card">
      <div class="form-header">
        <h2>Kelola Siswa</h2>
        <button class="btn-close" onclick="showLevelSelect()">×</button>
      </div>
      <div id="adminTabs">
        <button class="btn-primary" onclick="showTab('addStudent')">Tambah Siswa</button>
        <button class="btn-secondary" onclick="showTab('listStudent')">Daftar Siswa</button>
      </div>
      <div id="addStudent" class="tab-content">
        <form id="addStudentForm">
          <div class="form-group">
            <label for="studentName">Nama Siswa:</label>
            <input type="text" id="studentName" required>
          </div>
          <div class="form-group">
            <label for="studentEmail">Email:</label>
            <input type="email" id="studentEmail" required>
          </div>
          <div class="form-group">
            <label for="studentPassword">Kata Sandi:</label>
            <input type="password" id="studentPassword" required>
          </div>
          <div class="form-actions">
            <button type="button" class="btn-secondary" onclick="showLevelSelect()">Batal</button>
            <button type="submit" class="btn-primary">Tambah Siswa</button>
          </div>
        </form>
      </div>
      <div id="listStudent" class="tab-content hidden">
        <div id="studentList"></div>
      </div>
    </div>
  </section>

  <!-- Quiz Modal -->
  <div id="quizModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <span id="currentLevelBadge" class="level-badge"></span>
        <button class="btn-close" onclick="closeQuiz()">×</button>
      </div>
      <div class="progress-bar">
        <div id="quizProgress" class="progress"></div>
      </div>
      <div class="question-info">
        <span>Soal <span id="currentQuestion">1</span> dari <span id="totalQuestions">0</span></span>
        <span>Waktu: <span id="timer">30</span>s</span>
      </div>
      <h2 id="questionTitle"></h2>
      <div id="optionsGrid" class="options-grid"></div>
    </div>
  </div>

  <!-- Result Modal -->
  <div id="resultModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Hasil Kuis</h2>
        <button class="btn-close" onclick="closeResult()">×</button>
      </div>
      <div id="resultIcon" class="result-icon"></div>
      <h2 id="resultTitle"></h2>
      <p id="resultMessage"></p>
      <div class="result-stats">
        <div class="stat-item">
          <i class="fas fa-star"></i>
          <span>Skor: </span>
          <span id="levelScore">0</span>
        </div>
        <div class="stat-item">
          <i class="fas fa-clock"></i>
          <span>Waktu: </span>
          <span id="levelTime">0s</span>
        </div>
        <div class="stat-item">
          <i class="fas fa-check-circle"></i>
          <span>Akurasi: </span>
          <span id="levelAccuracy">0%</span>
        </div>
      </div>
      <div class="modal-actions">
        <button class="btn-secondary" onclick="closeResult()">Kembali</button>
        <button id="nextLevelBtn" class="btn-primary" onclick="startNextLevel()">Level Berikutnya</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Pengaturan</h2>
        <button class="btn-close" onclick="closeSettings()">×</button>
      </div>
      <form id="settingsForm">
        <div class="form-group">
          <label for="questionTime">Waktu per Soal (detik):</label>
          <input type="number" id="questionTime" min="10" max="60" value="30">
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="showFeedback">
            Tampilkan Umpan Balik Jawaban
          </label>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="shuffleQuestions">
            Acak Soal
          </label>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="darkMode">
            Mode Gelap
          </label>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="singleDeviceMode">
            Mode 1 Laptop
          </label>
        </div>
        <div class="form-group">
          <button type="button" class="btn-secondary" onclick="toggleLevelRepeats()">
            Atur Pengulangan Level
            <i id="toggleIcon" class="fas fa-chevron-down"></i>
          </button>
          <div id="levelRepeatsSettings" class="hidden"></div>
        </div>
        <div class="form-actions">
          <button type="button" class="btn-secondary" onclick="closeSettings()">Batal</button>
          <button type="submit" class="btn-primary">Simpan</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Login Modal for Multi-Device -->
  <div id="loginModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Login Siswa</h2>
        <button class="btn-close" onclick="closeLoginModal()">×</button>
      </div>
      <form id="loginForm">
        <div class="form-group">
          <label for="loginEmail">Email:</label>
          <input type="email" id="loginEmail" required>
        </div>
        <div class="form-group">
          <label for="loginPassword">Kata Sandi:</label>
          <input type="password" id="loginPassword" required>
        </div>
        <div class="form-actions">
          <button type="button" class="btn-secondary" onclick="closeLoginModal()">Batal</button>
          <button type="submit" class="btn-primary">Login</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script type="module" src="script.js"></script>
</body>
</html>
